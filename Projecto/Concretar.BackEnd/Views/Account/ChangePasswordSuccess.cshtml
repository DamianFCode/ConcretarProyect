@model Concretar.DTO.LoginDTO

@{
    ViewData["Title"] = ViewBag.Motivo;
}

@{
    Layout = "";
}

<style>
    .text-danger {
        color: red;
        margin-left: 40px;
        font-size: 12px;
    }

    .btn-sub {
        background-color: #141b4d !important;
    }

    .card .card-title {
        font-size: 24px !important;
        margin-top: 55px !important;
        font-weight: 400 !important;
        text-align: center !important;
    }

    .message-text {
        margin-left: 4px;
        margin-right: 4px;
        text-align: center;
        padding: 3px;
        margin-bottom: 55px;
    }

    .loader {
        border: 5px solid #e7dddd;
        border-radius: 50%;
        border-top: 5px solid #64c0d1;
        width: 30px;
        height: 30px;
        -webkit-animation: spin 2s linear infinite; /* Safari */
        animation: spin 2s linear infinite;
        margin-left: 128px;
    }

    /* Safari */
    @@-webkit-keyframes spin {
        0% {
            -webkit-transform: rotate(0deg);
        }

        100% {
            -webkit-transform: rotate(360deg);
        }
    }

    @@keyframes spin {
        0% {
            transform: rotate(0deg);
        }

        100% {
            transform: rotate(360deg);
        }
    }

    .textFix {
        margin-top: -25px;
        padding-top: -12px;
    }
    .redirect {
        margin-top: 23px;
    }
</style>

<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
    <meta name="version" content="1.1.1">
    <title>Establecer Contraseña</title>
    <link rel="icon" type="image/x-icon" href="~/fav-1.ico" sizes="16x16" />
    <link rel="apple-touch-icon-precomposed" href="~/favicon.png">
    <meta name="msapplication-TileColor" content="#00bcd4">
    <meta name="msapplication-TileImage" content="~/favicon.png">
    <link href="~/js/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection">
    <link href="~/js/style.min.css" type="text/css" rel="stylesheet" media="screen,projection">
    <link href="~/js/page-center.css" type="text/css" rel="stylesheet" media="screen,projection">

    <link href="~/js/prism.css" type="text/css" rel="stylesheet" media="screen,projection">
    <link href="~/js/perfect-scrollbar.css" type="text/css" rel="stylesheet" media="screen,projection">
    <link href="~/template/material-design-iconic-font/dist/css/material-design-iconic-font.css" rel="stylesheet" />
    <link rel="stylesheet" href="~/template/bootstrap/dist/css/bootstrap.min.css" />
    <link href="~/lib/font-awesome/css/fontawesome-all.min.css" rel="stylesheet" />
    <link href="~/lib/font-awesome-js/css/fa-svg-with-js.css" rel="stylesheet" />
</head>
<body class="grey">
    <div id="loader-wrapper">
        <div id="loader"></div>
        <div class="loader-section section-left"></div>
        <div class="loader-section section-right"></div>
    </div>
    <div class="card card-columns" style="width: 35rem;">
        <div class="card-body">
            <form asp-action="Login" asp-controller="Account" method="Post" id="successPassword">
                <div class="row">
                    <div class="input-field col s12 center pt-3">
                        <img src="~/images/Asset 1as4.png" alt="" class="responsive-img valign">
                    </div>
                </div>
                @Html.HiddenFor(m => m.Contrasena)
                @Html.HiddenFor(m => m.Email)
                <h2 class="card-title">¡ @ViewData["Title"] !</h2>
                <br />
                <div class="message-text">
                    @ViewBag.Content<br />
                    Aguarde y será redireccionado al sistema...
                    <div class="redirect">
                        <div class="loader"></div>
                        <div class="textFix">
                            <span id="RedireccionandoText">Redireccionando</span>
                            <span id="timer" class="totalText timeValue">5</span>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <script src="~/js/jquery-1.11.2.min.js"></script>
    <script type="text/javascript" src="~/js/materialize.min.js"></script>
    <script type="text/javascript" src="~/js/prism.js"></script>
    <script type="text/javascript" src="~/js/perfect-scrollbar.min.js"></script>
    <script type="text/javascript" src="~/js/plugins.min.js"></script>
    <script src="~/lib/jquery-validation/dist/jquery.validate.js"></script>
    <script src="~/template/jquery-ajax-unobtrusive/jquery.unobtrusive-ajax.min.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js"></script>
    <script src="~/template/popper/js/popper.min.js"></script>
    <script src="~/template/bootstrap/dist/js/bootstrap.min.js"></script>
    <script defer src="~/lib/font-awesome-js/js/fontawesome-all.min.js"></script>
</body>
</html>

<script>
    $(document).ready(function () {

        var $worked = $("#timer");
        function update() {
            var myTime = $worked.html();
            myTime = myTime - 1;
            if (myTime == "0") {
                $("#timer").text("");
                $("#temp").text("Redireccionando...");
                window.setTimeout(function () {
                    RedirectToLogin();
                }, 1500);
            } else {
                $worked.html(myTime);
                setTimeout(update, 1000);
            }
        }

        setTimeout(update, 1000);

        function RedirectToLogin() {
            //submit form
            $('#successPassword').submit();
        }

    });

</script>